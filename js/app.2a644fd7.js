(function(e){function t(t){for(var r,s,o=t[0],l=t[1],u=t[2],c=0,h=[];c<o.length;c++)s=o[c],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(h.length)h.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},i={app:0},n=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("lay-out")],1)},n=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"contain"},[a("el-aside",{staticClass:"left-column"},[a("side-bar",{attrs:{"sample-queries":e.sampleQueries},on:{choosedQuery:e.choosedQuery}})],1),a("el-main",{staticClass:"right-column"},[a("head-searcher",{attrs:{query:e.query,"sample-queries":e.sampleQueries},on:{getQuery:e.getQuery}}),a("div",{staticClass:"result-container"},[a("results-table",{attrs:{round:e.round,"table-data":e.tableData},on:{getMessage:e.getMessage}})],1),a("div",{staticClass:"candidate-answers-container"},[a("candidate-answers",{attrs:{"candidate-answers":e.candidateAnswers,options:e.options,round:e.round,"max-round":e.maxRound},on:{getSelectedSample:e.getSelectedSample}})],1),a("div",{staticClass:"query-graph-container"},[a("query-graph",{attrs:{"graph-data":e.graphData,"selected-sample":e.selectedSample}})],1),a("control-buttons")],1)],1)},o=[],l=(a("b64b"),a("d3b7"),a("25f0"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"side-bar"}},[a("el-table",{attrs:{stripe:"",data:e.sampleQueries,height:e.autoHeight.height},on:{"row-click":e.clickData}},[a("el-table-column",{attrs:{prop:"query",label:"sample queries",align:"center","show-overflow-tooltip":!0}})],1)],1)}),u=[],d={name:"SideBar",props:{sampleQueries:{type:Array,default:function(){return[]}},singlePath:{type:Array,default:function(){return[]}}},data:function(){return{windowHeight:0,autoHeight:{height:""},cardInfoList:""}},created:function(){window.addEventListener("resize",this.getHeight),this.getHeight()},destroyed:function(){window.removeEventListener("resize",this.getHeight)},methods:{clickData:function(e){this.cardInfoList=e,this.$emit("choosedQuery",this.cardInfoList)},getHeight:function(){this.windowHeight=window.innerHeight,this.autoHeight.height=this.windowHeight-40+"px"}}},c=d,h=a("2877"),p=Object(h["a"])(c,l,u,!1,null,null,null),f=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-search",class:{show:e.show}},[a("el-select",{ref:"headerSearchSelect",staticClass:"header-search-select",attrs:{"remote-method":e.querySearch,filterable:"",remote:"",placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},e._l(e.options,(function(e){var t=e.item;return a("el-option",{key:t.query,attrs:{value:t.query,label:t.query}})})),1),a("el-button",{staticClass:"search-icon",attrs:{type:"primary"},on:{click:e.proceed}},[e._v("submit query")])],1)},y=[],g=(a("ac1f"),a("841c"),a("6062")),b={name:"HeaderSearch",props:{sampleQueries:{type:Array,default:function(){return[]}},query:{type:String,default:function(){return""}}},data:function(){return{search:"",options:[],searchPool:[],show:!0,fuse:void 0}},watch:{query:function(e){this.search=e}},mounted:function(){this.searchPool=this.sampleQueries,this.fuse=new g["a"](this.searchPool,{shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["query"]})},methods:{querySearch:function(e){this.options=""!==e?this.fuse.search(e):[]},proceed:function(){this.$emit("getQuery")}}},v=b,w=(a("db2a"),Object(h["a"])(v,m,y,!1,null,"2ec221dd",null)),q=w.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"calc(100% - 40px)",margin:"20px"},attrs:{data:e.copydata,"empty-text":"Please choose a query",border:""}},[a("el-table-column",{attrs:{prop:"round",label:"round",width:"100"}}),a("el-table-column",{attrs:{prop:"result",label:"result",width:"100"}}),a("el-table-column",{attrs:{prop:"error",label:"error",width:"100"}}),a("el-table-column",{attrs:{prop:"confidence interval",label:"confidence interval"}}),a("el-table-column",{attrs:{prop:"confidence level-fixed",label:"confidence level-fixed"}}),a("el-table-column",{attrs:{prop:"runtime of this round",label:"runtime of this round"}})],1),a("el-button",{staticClass:"button-style",attrs:{type:"primary",disabled:e.disabled},on:{click:e.proceed}},[e._v("continue")])],1)},C=[],D=(a("a9e3"),a("fb6a"),{name:"ResultsTable",props:{round:{type:Number,default:0},tableData:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:function(){return!1}}},data:function(){return{copydata:[]}},watch:{round:function(e){this.copydata=this.tableData.slice(0,e)}},methods:{proceed:function(){this.$emit("getMessage")}}}),S=D,k=(a("b0e3"),Object(h["a"])(S,A,C,!1,null,"207a5a56",null)),P=k.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.samples,(function(t){return a("el-container",{key:t.value,style:"height: 200px;float:left; border: 1px solid #eee;width: "+e.wide+"%"},[a("el-container",[a("el-main",{staticStyle:{padding:"0"}},[a("el-table",{attrs:{data:e.candidateAnswers[t.value-1]},on:{"row-click":e.clickData}},[a("el-table-column",{attrs:{prop:"sampleName",label:"round: "+t.value}})],1)],1)],1)],1)})),a("el-table",{attrs:{data:e.selectsample}},[a("el-table-column",{attrs:{prop:"samplename",label:"sample name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"visitprobality",label:"sample visitprobality","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"semanticsimilarities",label:"sample semanticsimilarities","show-overflow-tooltip":!0}})],1)],2)},j=[],O={name:"CandidateAnswers",props:{candidateAnswers:{type:Array,default:function(){return[]}},options:{type:Array,default:function(){return[]}},round:{type:Number,default:0}},data:function(){return{currentround:1,copyArray:this.options,samples:[],wide:100,selectsample:[{samplename:"",visitprobality:"",semanticsimilarities:""}]}},watch:{round:function(e){this.currentround=e,this.wide=100/this.round,this.samples=this.copyArray.slice(0,this.currentround)},options:function(e){this.copyArray=e,this.selectsample[0].visitprobality="",this.selectsample[0].semanticsimilarities="",this.selectsample[0].samplename=""}},methods:{clickData:function(e){this.selectsample[0].visitprobality=e.visitprobality,this.selectsample[0].semanticsimilarities=e.semanticsimilarities,this.selectsample[0].samplename=e.sampleName,this.$emit("getSelectedSample",this.selectsample[0])}}},H=O,_=(a("581d"),Object(h["a"])(H,x,j,!1,null,"c99a1a4c",null)),E=_.exports,M=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"network",staticStyle:{width:"100%",height:"450px",border:"1px solid #ccc"},attrs:{id:"query-graph"}})])}],I=a("5530"),Q=(a("b0c0"),a("53ca")),N=(a("d9e2"),{autoResize:!0,nodes:{shape:"ellipse",size:18,shadow:!1,font:{size:12,color:"black",align:"center"},color:{border:"transparent",background:"#eee",highlight:{border:"rgb(117, 218, 167)",background:"rgb(117, 218, 167)"},hover:{border:"#dff9fb",background:"#88dab1"}},margin:5,widthConstraint:100,borderWidth:1,borderWidthSelected:3},edges:{width:1,color:{color:"#848499",highlight:"rgb(117, 218, 167)",hover:"#88dab1",inherit:"from",opacity:1},font:{color:"#343434",size:12,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{color:"#343434",size:12,face:"arial",vadjust:0,mod:"bold"},ital:{color:"#343434",size:12,face:"arial",vadjust:0,mod:"italic"},boldital:{color:"#343434",size:12,face:"arial",vadjust:0,mod:"bold italic"},mono:{color:"#343434",size:12,face:"courier new",vadjust:2,mod:""}},shadow:!1,smooth:{enabled:!0},arrows:{to:!0}},physics:{stabilization:!0,enabled:!0,barnesHut:{gravitationalConstant:-12e3,centralGravity:.2,springLength:120,springConstant:.04,damping:.09,avoidOverlap:0}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,hoverConnectedEdges:!0,keyboard:{enabled:!0,speed:{x:10,y:10,zoom:.05},bindToWindow:!0},multiselect:!1,navigationButtons:!0,selectable:!0,selectConnectedEdges:!0,tooltipDelay:300,zoomView:!0}});function $(e){if(!e&&"object"!==Object(Q["a"])(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(a){e[a]&&"object"===Object(Q["a"])(e[a])?t[a]=$(e[a]):t[a]=e[a]})),t}var T=a("f05c"),L=a.n(T),R={name:"QueryGraph",props:{graphData:{type:Array,default:function(){return[]}},selectedSample:{type:String,default:function(){return""}}},data:function(){return{dialogVisible:!1,nodes:[],edges:[],container:null,nodesArray:[],edgesArray:[],originArray:[],options:N,data:{},sampleMapId:{},idCount:1,valueCount:1,pathLimit:150,selectedPath:[],selectedPathHistory:[]}},watch:{selectedSample:function(e){for(var t=[],a=[],r=0;r<this.originArray.length;r++)if(this.originArray[r].path[0]===e){0!==this.selectedPath.length&&(this.selectedPathHistory=this.selectedPath),this.selectedPath=this.originArray[r].path;for(var i=0,n=0;n<this.selectedPath.length;n++)i%2===0&&t.push(this.sampleMapId[this.selectedPath[n]]),i++;i=0;for(var s=0;s<this.selectedPathHistory.length;s++)i%2===0&&a.push(this.sampleMapId[this.selectedPathHistory[s]]),i++;break}var o=t.length,l=100;this.updateNodeColor(t[0],"#00b050",o*l,o*l,!0);for(var u=1;u<t.length-1;u++)this.updateNodeColor(t[u],"#00b050",(o-u)*l,(o-u)*l,!0),this.updateEdgeColor(this.findPathId(t[u],t[u-1]),"#0070c0",5);if(this.updateEdgeColor(this.findPathId(t[t.length-1],t[t.length-2]),"#0070c0",5),0!==a.length){this.updateNodeColor(a[0],"#eee",void 0,void 0,!1);for(var d=1;d<a.length-1;d++)this.updateNodeColor(a[d],"#eee",void 0,void 0,!1),this.updateEdgeColor(this.findPathId(a[d],a[d-1]),"#848499",1);this.updateEdgeColor(this.findPathId(a[a.length-1],a[a.length-2]),"#848499",1)}},graphData:function(e){var t=this;this.originArray=e,this.nodesArray=[],this.edgesArray=[],this.sampleMapId={},this.idCount=1,e.forEach((function(e){for(var a=e.path,r=1,i=0;i<a.length;i++){var n=a[i];void 0===t.sampleMapId[n]&&r%2===1&&(t.sampleMapId[n]=t.idCount,t.nodesArray.push({id:t.idCount,name:n}),t.idCount++),r++}r=1;for(var s=0;s<a.length;s++)r%2===0&&function(){var e=t.sampleMapId[a[s-1]],r=t.sampleMapId[a[s+1]];if(0===t.edgesArray.length)t.edgesArray.push({from:r,to:e,width:1,id:t.valueCount,label:a[s]}),t.valueCount++;else{for(var i=!0,n=0;n<t.edgesArray.length;n++)if(e===t.edgesArray[n].to&&r===t.edgesArray[n].from){i=!1;break}i&&(t.edgesArray.push({from:r,to:e,width:1,id:t.valueCount,label:a[s]}),t.valueCount++,s===a.length-2&&t.nodesArray.forEach((function(e){e.id===r&&(e.color="#c00000")})))}}(),r++})),this.reinitialize()}},mounted:function(){this.reinitialize()},methods:{findPathId:function(e,t){for(var a=0;a<this.edgesArray.length;a++)if(this.edgesArray[a].from===e&&this.edgesArray[a].to===t)return this.edgesArray[a].id},updateNodeColor:function(e,t,a,r,i){var n=this.nodes.get(e);n.color=t,n.physics=!i,n.x=void 0!==a?a:void 0,n.y=void 0!==r?r:void 0,this.nodes.update(n)},updateEdgeColor:function(e,t,a){var r=this.edges.get(e);r.color=t,r.width=a,this.edges.update(r)},dataCut:function(e,t){if(e.length<=t)return e;this.$message.warning("There are too many paths, and some paths have been cut out for better display.");for(var a=[],r=0;r<t;r++)a.push(e[r]);return a},reinitialize:function(){this.nodes=new L.a.DataSet([]),this.edges=new L.a.DataSet([]),this.init(this.nodes,this.edges),this.network.moveTo({scale:.85});var e={nodes:this.nodesArray,edges:this.edgesArray};this.addNetworkParams(e)},init:function(e,t){this.container=document.getElementById("query-graph"),this.data={nodes:e,edges:t},this.network=new L.a.Network(this.container,this.data,this.options)},addNetworkParams:function(e){for(var t=0;t<e.nodes.length;t++){var a=e.nodes[t];this.nodes.add(Object(I["a"])({label:a.name},a))}for(var r=0;r<e.edges.length;r++){var i=e.edges[r];this.edges.add(Object(I["a"])({},i))}}}},W=R,B=(a("71e8"),Object(h["a"])(W,M,z,!1,null,"1be64a08",null)),G=B.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},J=[],U={name:"ControlButtons"},F=U,K=Object(h["a"])(F,V,J,!1,null,"0d6f165e",null),X=K.exports,Y=[{query:"How many airports are located in California"},{query:"How many astronaut from Russia"},{query:"How many books written by Danielle Steel"},{query:"How many companies in Munich"},{query:"How many companies in the advertising industry"},{query:"How many films in Danish"},{query:"How many films produced by Hal Roach"},{query:"How many politicians in Methodism"},{query:"How many soccerclubs in Spain"},{query:"How many software has been developed by organizations founded in California"},{query:"What’s the average age of soccer player from Spain"},{query:"What’s the average height of basketball player from United_States"},{query:"What’s the average value of soccer player from Spain"},{query:"What’s the sum salary of soccer player from Spain"},{query:"What’s the sum value of soccer player from Spain"}],Z=Y,ee=a("bc3a"),te=a.n(ee),ae=a("5c96"),re=a.n(ae),ie={name:"LayOut",components:{SideBar:f,HeadSearcher:q,ResultsTable:P,CandidateAnswers:E,QueryGraph:G,ControlButtons:X},data:function(){return{sampleQueries:Z,candidateAnswers:[],queryData:{},graphData:[],tableData:[],round:0,maxRound:0,options:[],query:"",click:0,selectedSample:""}},mounted:function(){},methods:{dataProcess:function(e){if(0===Object.keys(e).length)return e;for(var t=Object.keys(e),a=2;a<=t.length;a++){for(var r=$(e[a].queryPath),i=$(e[a-1].queryPath),n=r.length,s=i.length,o=void 0,l=void 0,u=0;u<n;u++){o=r[u].path;for(var d=!0,c=0;c<s;c++)if(l=i[c].path,o.toString()===l.toString()){d=!1;break}d&&i.push(r[u])}e[a].queryPath=i}return e},getSelectedSample:function(e){this.selectedSample=e.samplename},choosedQuery:function(e){var t=this;this.click=1,this.query=e.query,te.a.get("./data/"+e.query+".json").then((function(e){e=e.data,t.queryData=e,t.queryData=t.dataProcess(t.queryData),t.maxRound=Object.keys(t.queryData).length,t.round=0,t.tableData=[],t.candidateAnswers=[],t.graphData=[],t.tableData=[],t.options=[],t.initTableData(),t.initGraphData(),t.initCandidateAnswers()}))},getQuery:function(){0!==this.click?this.round>=1||(this.round=1,this.initTableData(),this.initGraphData()):ae["Message"].error("Please choose a query")},getMessage:function(){this.round>=this.maxRound?ae["Message"].error("Reaches the maximum number of iterations"):0!==this.click?(this.round++,this.initTableData(),this.initGraphData()):ae["Message"].error("Please choose a query")},initTableData:function(){if(0!==this.round){var e={};e["round"]=this.round,e["confidence interval"]=this.queryData[this.round]["confidence interval"],e["confidence level-fixed"]=this.queryData[this.round]["confidence level-fixed"],e["error"]=this.queryData[this.round]["error"],e["result"]=this.queryData[this.round]["result"],e["runtime of this round"]=this.queryData[this.round]["runtime of this round"],this.tableData.push(e),this.graphData=this.queryData[this.round]}},initGraphData:function(){0!==this.round&&(this.graphData=this.queryData[this.round]["queryPath"])},initCandidateAnswers:function(){var e=this;this.candidateAnswers=[];for(var t=function(t){e.options.push({label:"round "+t,value:t});var a=[];e.queryData[t]["queryPath"].forEach((function(e){a.push({sampleName:e.path[0],visitprobality:e["visit probality"],semanticsimilarities:e["semantic similarities"]})})),e.candidateAnswers.push(a)},a=1;a<=this.maxRound;a++)t(a)}}},ne=ie,se=(a("9a64"),Object(h["a"])(ne,s,o,!1,null,"7e5cb721",null)),oe=se.exports,le={name:"App",components:{LayOut:oe}},ue=le,de=Object(h["a"])(ue,i,n,!1,null,null,null),ce=de.exports;a("f5df1"),a("0fae"),a("b20f"),a("e570");r["default"].config.productionTip=!1,r["default"].use(re.a),new r["default"]({render:function(e){return e(ce)}}).$mount("#app")},"581d":function(e,t,a){"use strict";a("5b1f")},5983:function(e,t,a){},"5b1f":function(e,t,a){},"68b6":function(e,t,a){},"71e8":function(e,t,a){"use strict";a("9f2b")},"911d":function(e,t,a){},"9a64":function(e,t,a){"use strict";a("5983")},"9f2b":function(e,t,a){},b0e3:function(e,t,a){"use strict";a("911d")},b20f:function(e,t,a){e.exports={blue:"#324157","light-blue":"#3A71A8",sideBarWidth:"30%",sideBarHeight:"85%"}},db2a:function(e,t,a){"use strict";a("68b6")}});
//# sourceMappingURL=app.2a644fd7.js.map